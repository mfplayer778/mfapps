<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LP耐性吸収計算君</title>
<style>
* { box-sizing: border-box; }

body {
  font-family: system-ui, -apple-system;
  background: #1e1e2f;
  color: #fff;
  margin: 0;
  padding: 8px;
}

h1 { text-align: center; margin-bottom: 4px; font-size: 18px; }
h2 { text-align: center; margin-bottom: 4px; font-weight: normal; font-size: 16px; }
.note { text-align: center; font-size: 10px; color: #ccc; margin-bottom: 8px; }

.panel {
  background: #2b2b44;
  padding: 6px;
  border-radius: 6px;
  margin-bottom: 8px;
  width: 100%;
  overflow-x: auto;
}

table {
  border-collapse: collapse;
  width: 100%;
  table-layout: fixed;
  font-size: 12px;
}

th, td {
  border: 1px solid #555;
  padding: 3px;
  text-align: center;
  vertical-align: middle;
  min-height: 28px;
}

input.calcInput {
  width: 100%;
  max-width: 60px;
  background: #1e1e2f;
  color: #fff;
  border: none;
  border-radius: 4px;
  padding: 2px;
  text-align: center;
  font-size: 12px;
}

/* スピンなし */
input.noSpin::-webkit-outer-spin-button,
input.noSpin::-webkit-inner-spin-button { -webkit-appearance: none; margin:0; }
input.noSpin { -moz-appearance: textfield; }

.result { color: #66ccff; font-weight: bold; font-size: 12px; }

/* スマホ調整 */
@media (max-width: 480px) {
  table { font-size: 11px; }
  input.calcInput { width: 50px; font-size: 11px; padding: 1px; }
  td, th { min-height: 24px; padding: 2px; }
}
</style>
</head>
<body>

<h1>LP耐性吸収計算君</h1>
<div class="note">※計算式精査中のため事前に吸収実験を行うことを推奨</div>

<h2>LP計算</h2>
<div class="panel">
  <table>
    <tr>
      <th>吸収する側</th>
      <th>吸収される側</th>
      <th>吸収後のLP</th>
    </tr>
    <tr>
      <td><input type="number" class="calcInput" id="lp1Absorber" placeholder="数値入力"></td>
      <td><input type="number" class="calcInput" id="lp1Absorbed" placeholder="数値入力"></td>
      <td class="result" id="lp1Result">0</td>
    </tr>
    <tr>
      <td><input type="number" class="calcInput" id="lp2Absorber" placeholder="数値入力"></td>
      <td class="result" id="lp2Absorbed">0</td>
      <td><input type="number" class="calcInput" id="lp2ResultInput" placeholder="数値入力"></td>
    </tr>
    <tr>
      <td class="result" id="lp3Absorber">0</td>
      <td><input type="number" class="calcInput" id="lp3Absorbed" placeholder="数値入力"></td>
      <td><input type="number" class="calcInput" id="lp3ResultInput" placeholder="数値入力"></td>
    </tr>
  </table>
</div>

<h2>耐性計算</h2>
<div class="panel">
  <table>
    <tr>
      <th>吸収する側</th>
      <th>吸収される側</th>
      <th>吸収後の耐性</th>
    </tr>
    <tr>
      <td><input type="number" class="calcInput noSpin" id="res1Absorber" placeholder="数値入力"></td>
      <td><input type="number" class="calcInput noSpin" id="res1Absorbed" placeholder="数値入力"></td>
      <td class="result" id="res1Result">0</td>
    </tr>
    <tr>
      <td><input type="number" class="calcInput noSpin" id="res2Absorber" placeholder="数値入力"></td>
      <td class="result" id="res2Absorbed">0</td>
      <td><input type="number" class="calcInput noSpin" id="res2ResultInput" placeholder="数値入力"></td>
    </tr>
    <tr>
      <td class="result" id="res3Absorber">0</td>
      <td><input type="number" class="calcInput noSpin" id="res3Absorbed" placeholder="数値入力"></td>
      <td><input type="number" class="calcInput noSpin" id="res3ResultInput" placeholder="数値入力"></td>
    </tr>
  </table>
</div>

<h2>耐性計算Ⅱ</h2>
<div class="panel">
  <table>
    <tr>
      <th>項目</th>
      <th>吸収する側</th>
      <th>吸収される側</th>
      <th>吸収後の耐性</th>
    </tr>
    <tr>
      <td>火耐性</td>
      <td><input type="number" class="calcInput noSpin" id="res2_1Absorber" placeholder="数値入力"></td>
      <td><input type="number" class="calcInput noSpin" id="res2_1Absorbed" placeholder="数値入力"></td>
      <td class="result" id="res2_1Result">0</td>
    </tr>
    <tr>
      <td>氷耐性</td>
      <td><input type="number" class="calcInput noSpin" id="res2_2Absorber" placeholder="数値入力"></td>
      <td><input type="number" class="calcInput noSpin" id="res2_2Absorbed" placeholder="数値入力"></td>
      <td class="result" id="res2_2Result">0</td>
    </tr>
    <tr>
      <td>光耐性</td>
      <td><input type="number" class="calcInput noSpin" id="res2_3Absorber" placeholder="数値入力"></td>
      <td><input type="number" class="calcInput noSpin" id="res2_3Absorbed" placeholder="数値入力"></td>
      <td class="result" id="res2_3Result">0</td>
    </tr>
    <tr>
      <td>闇耐性</td>
      <td><input type="number" class="calcInput noSpin" id="res2_4Absorber" placeholder="数値入力"></td>
      <td><input type="number" class="calcInput noSpin" id="res2_4Absorbed" placeholder="数値入力"></td>
      <td class="result" id="res2_4Result">0</td>
    </tr>
    <tr>
      <td>回復量</td>
      <td><input type="number" class="calcInput noSpin" id="res2_5Absorber" placeholder="数値入力"></td>
      <td><input type="number" class="calcInput noSpin" id="res2_5Absorbed" placeholder="数値入力"></td>
      <td class="result" id="res2_5Result">0</td>
    </tr>
  </table>
</div>

<script>
// --- LP計算 ---
function updateLP1() {
  const a = Number(document.getElementById("lp1Absorber").value) || 0;
  const b = Number(document.getElementById("lp1Absorbed").value) || 0;
  const result = Math.round(Math.pow(a*a*b,0.333));
  document.getElementById("lp1Result").textContent = result;
}
function updateLP2() {
  const a = Number(document.getElementById("lp2Absorber").value) || 0;
  const lp = Number(document.getElementById("lp2ResultInput").value) || 0;
  const b = a!==0 ? Math.round(Math.pow(lp-0.499,3)/(a*a)) : 0;
  document.getElementById("lp2Absorbed").textContent = b;
}
function updateLP3() {
  const b = Number(document.getElementById("lp3Absorbed").value) || 0;
  const lp = Number(document.getElementById("lp3ResultInput").value) || 0;
  const a = b!==0 ? Math.round(Math.pow(lp-0.499,3)/b) : 0;
  document.getElementById("lp3Absorber").textContent = a;
}

// --- 耐性計算 ---
function updateRes1() {
  const a = Number(document.getElementById("res1Absorber").value) || 0;
  const b = Number(document.getElementById("res1Absorbed").value) || 0;
  const result = Math.round(Math.pow((a+1000)*(a+1000)*(b+1000),0.333)-1000);
  document.getElementById("res1Result").textContent = result;
}
function updateRes2() {
  const a = Number(document.getElementById("res2Absorber").value) || 0;
  const r = Number(document.getElementById("res2ResultInput").value) || 0;
  const b = a!==0 ? Math.round(Math.pow(r+1000,3.003)/((a+1000)*(a+1000))-1000) : 0;
  document.getElementById("res2Absorbed").textContent = b;
}
function updateRes3() {
  const b = Number(document.getElementById("res3Absorbed").value) || 0;
  const r = Number(document.getElementById("res3ResultInput").value) || 0;
  const a = b!==0 ? Math.round(Math.pow(r+1000,3.003)/((b+1000))-1000) : 0;
  document.getElementById("res3Absorber").textContent = a;
}

// --- 耐性計算Ⅱ ---
function updateRes2II(id){
  const absorber = Number(document.getElementById(`${id}Absorber`).value)||0;
  const absorbed = Number(document.getElementById(`${id}Absorbed`).value)||0;
  const result = Math.round(Math.pow((absorber+1000)*(absorber+1000)*(absorbed+1000),0.333)-1000);
  document.getElementById(`${id}Result`).textContent = result;
}

// --- イベント ---
document.getElementById("lp1Absorber").addEventListener("input", updateLP1);
document.getElementById("lp1Absorbed").addEventListener("input", updateLP1);
document.getElementById("lp2Absorber").addEventListener("input", updateLP2);
document.getElementById("lp2ResultInput").addEventListener("input", updateLP2);
document.getElementById("lp3Absorbed").addEventListener("input", updateLP3);
document.getElementById("lp3ResultInput").addEventListener("input", updateLP3);

document.getElementById("res1Absorber").addEventListener("input", updateRes1);
document.getElementById("res1Absorbed").addEventListener("input", updateRes1);
document.getElementById("res2Absorber").addEventListener("input", updateRes2);
document.getElementById("res2ResultInput").addEventListener("input", updateRes2);
document.getElementById("res3Absorbed").addEventListener("input", updateRes3);
document.getElementById("res3ResultInput").addEventListener("input", updateRes3);

["res2_1","res2_2","res2_3","res2_4","res2_5"].forEach(id=>{
  document.getElementById(`${id}Absorber`).addEventListener("input",()=>updateRes2II(id));
  document.getElementById(`${id}Absorbed`).addEventListener("input",()=>updateRes2II(id));
});
</script>

</body>
</html>
