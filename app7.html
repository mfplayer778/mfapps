<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LP耐性吸収計算君</title>
<style>
* { box-sizing: border-box; }

body {
  font-family: system-ui, -apple-system;
  background: #1e1e2f;
  color: #fff;
  margin: 0;
  padding: 8px;
}

h1 { text-align: center; font-size: 20px; margin-bottom: 6px; }
h2 { text-align: center; font-size: 16px; margin-bottom: 6px; font-weight: normal; }
.note { text-align: center; font-size: 11px; color: #ccc; margin-bottom: 10px; }

.panel {
  background: #2b2b44;
  padding: 8px;
  border-radius: 6px;
  margin-bottom: 10px;
  width: 100%;
  overflow-x: auto;
}

table {
  border-collapse: collapse;
  width: 100%;
  table-layout: fixed;
  font-size: 13px;
}

th, td {
  border: 1px solid #555;
  padding: 6px;
  text-align: center;
  vertical-align: middle;
  min-height: 36px;
}

/* 計算式・項目列を狭く固定 */
.colFormula {
  width: 56px;
  min-width: 56px;
  font-weight: bold;
  white-space: nowrap;
}

input.calcInput {
  width: 100%;
  max-width: 70px;
  background: #1e1e2f;
  color: #fff;
  border: none;
  border-radius: 4px;
  padding: 4px;
  text-align: center;
  font-size: 13px;
}

input.noSpin::-webkit-outer-spin-button,
input.noSpin::-webkit-inner-spin-button { -webkit-appearance: none; margin:0; }
input.noSpin { -moz-appearance: textfield; }

.result { color: #66ccff; font-weight: bold; }

@media (max-width: 480px) {
  .colFormula {
    width: 52px;
    min-width: 52px;
  }
}
</style>
</head>
<body>

<h1>LP耐性吸収計算君</h1>
<div class="note">
  ※計算式は精査中のため事前の吸収実験を推奨<br>
  ※②③では吸収後の目標値に対し、吸収する側/される側に必要な値の逆算が可能
</div>

<!-- LP計算 -->
<h2>LP計算</h2>
<div class="panel">
<table>
<tr>
  <th class="colFormula">計算式</th>
  <th>吸収する側</th>
  <th>吸収される側</th>
  <th>吸収後のLP</th>
</tr>
<tr>
  <td class="colFormula">①</td>
  <td><input type="number" class="calcInput" id="lp1Absorber"></td>
  <td><input type="number" class="calcInput" id="lp1Absorbed"></td>
  <td class="result" id="lp1Result">0</td>
</tr>
<tr>
  <td class="colFormula">②</td>
  <td><input type="number" class="calcInput" id="lp2Absorber"></td>
  <td class="result" id="lp2Absorbed">0</td>
  <td><input type="number" class="calcInput" id="lp2ResultInput"></td>
</tr>
<tr>
  <td class="colFormula">③</td>
  <td class="result" id="lp3Absorber">0</td>
  <td><input type="number" class="calcInput" id="lp3Absorbed"></td>
  <td><input type="number" class="calcInput" id="lp3ResultInput"></td>
</tr>
</table>
</div>

<!-- 耐性計算 -->
<h2>耐性計算</h2>
<div class="panel">
<table>
<tr>
  <th class="colFormula">計算式</th>
  <th>吸収する側</th>
  <th>吸収される側</th>
  <th>吸収後の耐性</th>
</tr>
<tr>
  <td class="colFormula">①</td>
  <td><input type="number" class="calcInput noSpin" id="res1Absorber"></td>
  <td><input type="number" class="calcInput noSpin" id="res1Absorbed"></td>
  <td class="result" id="res1Result">0</td>
</tr>
<tr>
  <td class="colFormula">②</td>
  <td><input type="number" class="calcInput noSpin" id="res2Absorber"></td>
  <td class="result" id="res2Absorbed">0</td>
  <td><input type="number" class="calcInput noSpin" id="res2ResultInput"></td>
</tr>
<tr>
  <td class="colFormula">③</td>
  <td class="result" id="res3Absorber">0</td>
  <td><input type="number" class="calcInput noSpin" id="res3Absorbed"></td>
  <td><input type="number" class="calcInput noSpin" id="res3ResultInput"></td>
</tr>
</table>
</div>

<!-- 耐性計算Ⅱ -->
<h2>耐性計算Ⅱ</h2>
<div class="panel">
<table>
<tr>
  <th class="colFormula">項目</th>
  <th>吸収する側</th>
  <th>吸収される側</th>
  <th>吸収後の耐性</th>
</tr>
<tr>
  <td class="colFormula">火耐性</td>
  <td><input type="number" class="calcInput noSpin" id="res2_1Absorber"></td>
  <td><input type="number" class="calcInput noSpin" id="res2_1Absorbed"></td>
  <td class="result" id="res2_1Result">0</td>
</tr>
<tr>
  <td class="colFormula">氷耐性</td>
  <td><input type="number" class="calcInput noSpin" id="res2_2Absorber"></td>
  <td><input type="number" class="calcInput noSpin" id="res2_2Absorbed"></td>
  <td class="result" id="res2_2Result">0</td>
</tr>
<tr>
  <td class="colFormula">光耐性</td>
  <td><input type="number" class="calcInput noSpin" id="res2_3Absorber"></td>
  <td><input type="number" class="calcInput noSpin" id="res2_3Absorbed"></td>
  <td class="result" id="res2_3Result">0</td>
</tr>
<tr>
  <td class="colFormula">闇耐性</td>
  <td><input type="number" class="calcInput noSpin" id="res2_4Absorber"></td>
  <td><input type="number" class="calcInput noSpin" id="res2_4Absorbed"></td>
  <td class="result" id="res2_4Result">0</td>
</tr>
<tr>
  <td class="colFormula">回復量</td>
  <td><input type="number" class="calcInput noSpin" id="res2_5Absorber"></td>
  <td><input type="number" class="calcInput noSpin" id="res2_5Absorbed"></td>
  <td class="result" id="res2_5Result">0</td>
</tr>
</table>
</div>

<!-- JS（元コードと完全同一） -->
<script>
// --- LP計算 ---
function updateLP1() {
  const a = Number(document.getElementById("lp1Absorber").value)||0;
  const b = Number(document.getElementById("lp1Absorbed").value)||0;
  document.getElementById("lp1Result").textContent =
    Math.round(Math.pow(a*a*b,0.333));
}
function updateLP2() {
  const a = Number(document.getElementById("lp2Absorber").value)||0;
  const lp = Number(document.getElementById("lp2ResultInput").value)||0;
  document.getElementById("lp2Absorbed").textContent =
    a!==0 ? Math.ceil(Math.pow(lp-0.499,3.003)/(a*a)) : 0;
}
function updateLP3() {
  const b = Number(document.getElementById("lp3Absorbed").value)||0;
  const lp = Number(document.getElementById("lp3ResultInput").value)||0;
  document.getElementById("lp3Absorber").textContent =
    b!==0 ? Math.ceil(Math.sqrt(Math.pow(lp-0.499,3.003)/b)) : 0;
}

// --- 耐性計算 ---
function updateRes1() {
  const a = Number(document.getElementById("res1Absorber").value)||0;
  const b = Number(document.getElementById("res1Absorbed").value)||0;
  document.getElementById("res1Result").textContent =
    Math.round(Math.pow((a+1000)*(a+1000)*(b+1000),0.333)-1000);
}
function updateRes2() {
  const a = Number(document.getElementById("res2Absorber").value)||0;
  const r = Number(document.getElementById("res2ResultInput").value)||0;
  document.getElementById("res2Absorbed").textContent =
    a!==0 ? Math.ceil(Math.pow(r+1000,3.003)/((a+1000)*(a+1000))-1000) : 0;
}
function updateRes3() {
  const b = Number(document.getElementById("res3Absorbed").value)||0;
  const r = Number(document.getElementById("res3ResultInput").value)||0;
  document.getElementById("res3Absorber").textContent =
    b!==0 ? Math.ceil(Math.sqrt(Math.pow(r+1000,3.003)/(b+1000))-1000) : 0;
}
function updateRes2II(id){
  const a = Number(document.getElementById(`${id}Absorber`).value)||0;
  const b = Number(document.getElementById(`${id}Absorbed`).value)||0;
  document.getElementById(`${id}Result`).textContent =
    Math.round(Math.pow((a+1000)*(a+1000)*(b+1000),0.333)-1000);
}

// イベント
document.querySelectorAll("input").forEach(el=>{
  el.addEventListener("input",()=>{
    updateLP1(); updateLP2(); updateLP3();
    updateRes1(); updateRes2(); updateRes3();
    ["res2_1","res2_2","res2_3","res2_4","res2_5"].forEach(updateRes2II);
  });
});
</script>

</body>
</html>


